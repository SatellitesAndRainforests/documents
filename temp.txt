import React from 'react';

type Props = { fileUrl: string };

const PdfViewer = ({ fileUrl }: Props) => {
    const hidePdfViewerButtons = (iframe: HTMLIFrameElement | null) => {
        if (!iframe) return;
        iframe.onload = () => {
            const iframeDoc = iframe.contentDocument || iframe.contentWindow?.document;
            if (iframeDoc) {
                const elementsToHide = ['#toolbarViewerRight', '#secondaryToolbar']; // Add IDs or classes here
                elementsToHide.forEach(selector => {
                    const element = iframeDoc.querySelector(selector);
                    if (element) {
                        element.style.display = 'none';
                    }
                });
            }
        };
    };

    if (!fileUrl) return null;

    return (
        <iframe
            id="pdf-viewer"
            data-testid="pdf-viewer"
            tabIndex={0}
            src={`/pdfjs/build/generic/web/viewer.html?file=${encodeURIComponent(fileUrl)}`}
            title="Embedded PDF Viewer"
            aria-label="PDF Viewer"
            style={{ height: 600, width: '100%' }}
            ref={hidePdfViewerButtons} // Call the function here
        />
    );
};

export default PdfViewer;

